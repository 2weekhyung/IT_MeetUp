<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mybatis 환경 설정 파일 활용 -->
<mapper namespace="com.itmeetup.mybatis.IReportListDAO">

	<select id="reportList"
		resultType="com.itmeetup.mybatis.ReportListDTO">
		SELECT SD_OP_CODE "sdOpCode"
		, ASS_NAME "assName"
		, REP_ASS_CODE "repAssCode"
		, PI_NICKNAME "piNickName"
		, OU_NAME "ouName"
		, SS_NAME "ssName"
		, SS_CODE "ssCode"
		, REP_TITLE "repTitle"
		, REP_NO "repNo"
		, REP_DATE "repDate"
		, REP_FILE "repFile"
		, APP_DATE "appDate"
		, WS_NAME "wsName"
		FROM VIEW_REPORT
		WHERE SD_OP_CODE = 'OP_2' AND REP_NO IS NOT NULL
	</select>

	<select id="reportPersonList"
		resultType="com.itmeetup.mybatis.ReportListDTO">
		SELECT
		DISTINCT PI_NICKNAME "piNickName"
		FROM
		VIEW_ASSIGNMENT
		WHERE SD_OP_CODE = 'OP_2'
	</select>

	<select id="reportOutputList"
		resultType="com.itmeetup.mybatis.ReportListDTO">
		SELECT DISTINCT OU.OU_NAME "ouName"
		FROM SCHEDULE_DETAILS SD
		LEFT JOIN SCHEDULE_STAGE SS ON SS.SS_CODE = SD.SD_SS_CODE
		LEFT JOIN
		OUTPUTS OU ON OU.OU_SS_CODE = SS.SS_CODE
		LEFT JOIN ASSIGNMENT ASS ON
		ASS.ASS_OU_CODE = OU.OU_CODE
		LEFT JOIN REPORT R ON R.REP_ASS_CODE =
		ASS.ASS_CODE
		WHERE SD_OP_CODE = 'OP_2'
	</select>

</mapper>