<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itmeetup.mybatis.IMemberDAO">

<!-- MemberDAO.xml -->
	
	<!-- ========================================[ 로그인 ]======================================== -->
	
	<!-- 일반회원 로그인 조회 쿼리문 -->
	<select id="getMember" parameterType="map" resultType="com.itmeetup.mybatis.MemberDTO">
		SELECT PI_MEM_CODE "PIMEMCODE", PI_ID "PIID", PI_PW "PIPW", PI_NICKNAME "PINICKNAME"
		FROM PERSONAL_INFO
		WHERE PI_ID=#{piId} AND PI_PW=#{piPw}
	</select>

	<!-- 관리자 로그인 조회 쿼리문 -->
	<select id="getAdmin" parameterType="map" resultType="com.itmeetup.mybatis.MemberDTO">
		SELECT AD_NO "PIMEMCODE", AD_ID "PIID", AD_PW "PIPW", AD_NICKNAME "PINICKNAME"
		FROM ADMIN
		WHERE AD_ID=#{piId} AND AD_PW=#{piPw}
	</select>
	
	<!-- ========================================[ 회원가입 ]======================================== -->
	<!-- 직업 조회 쿼리문 -->
	<select id="jobs" resultType="com.itmeetup.mybatis.JobDTO">
		SELECT JOB_CODE "JOBCODE", JOB_NAME "JOBNAME"
		FROM JOB
	</select>
	
	<!-- 모임방식 조회 쿼리문 -->
	<select id="meets" resultType="com.itmeetup.mybatis.MeetDTO">
		SELECT MEET_CODE "MEETCODE", MEET_NAME "MEETNAME"
		FROM MEETING
	</select>
	
	<!-- 희망기술 탭 조회 쿼리문 -->
	<select id="skillCategorys" resultType="com.itmeetup.mybatis.SkillCategoryDTO">
		SELECT SC_CODE "SCCODE", SC_NAME "SCNAME"
		FROM SKILL_CATEGORY
	</select>
	
	<!-- 희망기술 상세 조회 쿼리문 -->
	<select id="skills" resultType="com.itmeetup.mybatis.SkillDTO">
		SELECT SK_CODE "SKCODE", SK_NAME "SKNAME", SK_SC_CODE "SKSCCODE"
		FROM SKILL
	</select>
	
	<!-- 직업 추가 쿼리문 -->
	<select id="addMember" parameterType="string" statementType="CALLABLE">
		{call MEMBER_INSERT(
				   #{piName, mode=IN, jdbcType=VARCHAR}
				 , #{piEmail, mode=IN, jdbcType=VARCHAR}
				 , NULL
				 , #{piId, mode=IN, jdbcType=VARCHAR}
				 , #{piPw, mode=IN, jdbcType=VARCHAR}
				 , #{piNickname, mode=IN, jdbcType=VARCHAR}
				 , NULL
				 , #{mJobCode, mode=IN, jdbcType=VARCHAR}
				 , #{mMetCode, mode=IN, jdbcType=VARCHAR}
				 , #{mSiggCode, mode=IN, jdbcType=VARCHAR}
			)
		}
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>