<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itmeetup.mybatis.IIndictDAO">

<!-- mybatis 환경 설정 파일 활용 -->
<!-- IndictDAO.xml -->

	<!-- 팀 개설요청 리스트 조회 쿼리문 -->
	<select id="teamOpenIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM" , "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_TEAM_OPEN_INDICT
	</select>
	
	<!-- 댓글 신고 리스트 조회 쿼리문 -->
	<select id="commentIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM", "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_COMMENT_INDICT
	</select>
	
	<!-- 대댓글 신고 리스트 조회 쿼리문 -->
	<select id="recommentIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM", "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_RECOMMENT_INDICT
	</select>
	
	<!-- 업무할당 신고 리스트 조회 쿼리문 -->
	<select id="assignmentIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM", "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_ASSIGNMENT_INDICT
	</select>
	
	<!-- 업무보고 신고 리스트 조회 쿼리문 -->
	<select id="reportIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM", "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_REPORT_INDICT
	</select>
	
	<!-- 주간업무보고 신고 리스트 조회 쿼리문 -->
	<select id="weeklyIdtList" resultType="com.itmeetup.mybatis.IndictDTO">
		SELECT ROWNUM "IDTNUM", "IDTNO", "IDTDATE", "IDTREASON", "IDTPROCESS", "INDICTED", "IDTPROCESSDATE"
		FROM VIEW_WEEKLY_INDICT
	</select>
	
	
	<!-- 신고 처리 변경  -->
	<update id="teamOpenIdtListUpdate">	
		UPDATE TEAM_OPEN_INDICT
		SET TOI_PRO_DATE = SYSDATE
		  , TOI_AD_NO = 2
		  , TOI_IP_CODE = #{idtProcess}
		  , TOI_DEMERIT = #{demeritNum}
		WHERE TOI_NO = #{sendNum}
	</update>
	
</mapper>